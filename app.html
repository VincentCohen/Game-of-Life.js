<!DOCTYPE html>
<html>
<head>
    <title>Game of Life</title>
    <style>
        #platform {
            /*border:1px solid #ddd;*/
            border-top:0;
            display:block;
            margin: 20px auto;
        }
    </style>
</head>
    <body>
        <canvas id="platform" width="800" height="600">
            Oops!.. Your browser does not support canvas.
        </canvas>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" ></script>
        <script src="game-of-life.js"></script>
        <script>

            window.requestAnimFrame = (function(){
                return  window.requestAnimationFrame       ||
                        window.webkitRequestAnimationFrame ||
                        window.mozRequestAnimationFrame    ||
                        function( callback ){
                            window.setTimeout(callback, 1000 / 60);
                        };
            })();


            var canvas 	= document.getElementById('platform');
            var ctx 	= canvas.getContext('2d');
            var grid    = new Image();
                grid.src = 'grid.png';

            var myGameOfLife = new GameOfLife(canvas, ctx, grid, 10);


//            myGameOfLife.drawCell(100, 200);
//            myGameOfLife.drawCell(140, 200);
//            myGameOfLife.drawCell(125, 200);

            $('#platform').click(function(e){
                var offset = $(this).offset();
                var cellStatus = myGameOfLife.getCellStatus(e.clientX - offset.left, e.clientY - offset.top);

                if (!cellStatus)
                {
                    myGameOfLife.drawCell(e.clientX - offset.left, e.clientY - offset.top);
                }
                else if(cellStatus == 'alive')
                {
                    myGameOfLife.removeCell(e.clientX - offset.left, e.clientY - offset.top);
                }
            });

            function engine()
            {
                myGameOfLife.update();

                requestAnimFrame(engine);
            }

            myGameOfLife.live();
            engine();

        </script>
    </body>
</html>